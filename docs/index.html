<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashNews - Posts Publicados</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
        }
    </style>
</head>

<body class="p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-white mb-2">ðŸ“° FlashNews</h1>
            <p class="text-gray-400">Posts PÃºblicados</p>
        </header>

        <!-- Posts Grid -->
        <div id="posts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Posts will be loaded here -->
        </div>

        <!-- Loading State -->
        <div id="loading" class="text-center text-gray-400 py-12">
            Carregando posts...
        </div>

        <!-- Empty State -->
        <div id="empty" class="hidden text-center text-gray-400 py-12">
            <p class="text-6xl mb-4">ðŸ“­</p>
            <p>Nenhum post publicado ainda</p>
        </div>
    </div>

    <script>
        async function loadPosts() {
            try {
                const response = await fetch('posts/index.json');
                const posts = await response.json();

                const grid = document.getElementById('posts-grid');
                const loading = document.getElementById('loading');
                const empty = document.getElementById('empty');

                loading.classList.add('hidden');

                if (posts.length === 0) {
                    empty.classList.remove('hidden');
                    return;
                }

                // Sort by timestamp (newest first)
                posts.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

                posts.forEach(post => {
                    const card = document.createElement('div');
                    card.className = 'bg-gray-800 rounded-xl overflow-hidden border border-gray-700 hover:border-sky-500 transition-all cursor-pointer';
                    card.onclick = () => window.location.href = `post.html?id=${post.id}`;

                    const date = new Date(post.timestamp).toLocaleDateString('pt-BR', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric'
                    });

                    card.innerHTML = `
                        <img src="posts/${post.id}/card_1.png" alt="${post.title}" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <span class="inline-block px-2 py-1 text-xs font-semibold rounded bg-sky-600 text-white mb-2">
                                ${post.category}
                            </span>
                            <h2 class="text-white font-bold text-lg mb-2 line-clamp-2">${post.title}</h2>
                            <p class="text-gray-400 text-sm mb-3 line-clamp-3">${post.summary.split('\n')[0]}</p>
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span>ðŸ“… ${date}</span>
                                <span>${post.cardCount} cards</span>
                            </div>
                        </div>
                    `;

                    grid.appendChild(card);
                });

            } catch (error) {
                console.error('Error loading posts:', error);
                document.getElementById('loading').textContent = 'Erro ao carregar posts';
            }
        }

        // Load posts on page load
        loadPosts();
    </script>
</body>

</html>